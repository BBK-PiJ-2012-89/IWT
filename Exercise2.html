<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Exercise 2</title> 
<script type="text/javascript">
	
	function loadXML(url) {
		
	  if(window.XMLHttpRequest)
	  	{
		xhr=new XMLHttpRequest();
		} 
	else //internet explorer
		{
		xhr=new ActiveXObject("Microsoft.XMLHTTP");
		}
	  xhr.open("GET",url,false);
	  xhr.send("");
	  return xhr.responseXML;
	}
	
	
	function showXML(){
		
		var getTheFile = document.getElementById("getAFile").value;		
		var xmlDoc = loadXML(getTheFile);
				
		var stylesheet = loadXML("exercise1.xsl");
		
		if (typeof (XSLTProcessor) != "undefined") {
		  var processor = new XSLTProcessor();
		  processor.importStylesheet(stylesheet);
		  var result = processor.transformToFragment(xmlDoc, document);
		  document.getElementById("tableArea").appendChild(result);
		} else
		  document.write(xmlDoc.transformNode(stylesheet));
	return false;
	}
	
	function populateDropdown(){
		var years = document.getElementById('year');
		var option = document.createElement('option');
		for(var i = 1900; i < 2013; i++){
			option.text = i;
			years.add(new Option(i, i));
		}
	}
		
</script>
</head>

<body onLoad="populateDropdown()">


<div id="getFile">
  <form method="post" onsubmit="return showXML()">
    Which XML file should I load?
    <input id="getAFile" type="text">
    <br />
    <br />
    Timespan:   
    <select id="date">
        <option value=">">After</option>
        <option value="<">Before</option>
    </select>
    <select name="year" id="year">
    	<option id="getYear" class="blank" ></option>
    </select>
    <br />
    <br />
    Sort By:	
    <select id="sortBy">
    	<option class="blank"/>
    	<option value="year">Year</option>
        <option value="author">Author</option>
        <option value="title">Title</option>
   	</select>
    <br />
    What order would you like?
    Column 1:
    <select id="column1">
    	<option class="blank"/>
        <option value="year">Year</option>
        <option value="author">Author</option>
        <option value="title">Title</option>
     </select>
     Column 2:
    <select id="column2">
    	<option class="blank"/>
        <option value="year">Year</option>
        <option value="author">Author</option>
        <option value="title">Title</option>
     </select>
     Column 3:
    <select id="column3">
    	<option class="blank"/>
        <option value="year">Year</option>
        <option value="author">Author</option>
        <option value="title">Title</option>
     </select>
    <br />
    <br />
    <br />
    <button type="Submit">Submit</button>
  </form>  
</div>  
<br />
<br />
<br />
<div id="tableArea"> </div>
</body>
</html>